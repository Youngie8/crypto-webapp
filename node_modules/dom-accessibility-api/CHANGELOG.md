# dom-accessibility-api changelog

## 0.5.14

### Patch Changes

- [#827](https://github.com/eps1lon/dom-accessibility-api/pull/827) [`a1daca5`](https://github.com/eps1lon/dom-accessibility-api/commit/a1daca5576553faddd147742829338ee348b804c) Thanks [@nolanlawson](https://github.com/nolanlawson)! - Follow aria-labelledby and aria-describedby if they point to elements in the same shadow root.

## 0.5.13

### Patch Changes

- [#811](https://github.com/eps1lon/dom-accessibility-api/pull/811) [`5b0f48e`](https://github.com/eps1lon/dom-accessibility-api/commit/5b0f48e0668f77458396723751db498ba74d5686) Thanks [@eps1lon](https://github.com/eps1lon)! - Prefer button subtree over `title` attribute.

  ```diff
   const name = computeAccessibleName(<button title="from-title">from-content</button>);
  -'from-title' === name
  +'from-content' === name
  ```

  `<button title="from-title">from-content</button>` would previously compute the accessible name "from-title".
  This is correct in ACCNAME 1.2 but is changed in the latest editors draft.
  The latest editors draft specifically refers to HTML-AAM which says that the subtree should take precedent over the `title` attribute.
  `computeAccessibleName` now calculates "from-content" as the accessible name.

## 0.5.12

### Patch Changes

- [#800](https://github.com/eps1lon/dom-accessibility-api/pull/800) [`de554b0`](https://github.com/eps1lon/dom-accessibility-api/commit/de554b08c749d0f3e68baf8d7db4f0fbb571f40b) Thanks [@pablo-abc](https://github.com/pablo-abc)! - Remover circular dependency, which fixes warnings thrown in certain environments.

## 0.5.11

### Patch Changes

- [#796](https://github.com/eps1lon/dom-accessibility-api/pull/796) [`cb38778`](https://github.com/eps1lon/dom-accessibility-api/commit/cb3877882c35b474fe25f04365f4c0af11e10fa6) Thanks [@calebeby](https://github.com/calebeby)! - `<input type="number" />` now maps to `role` `spinbutton` (was `textbox` before).

## 0.5.10

### Patch Changes

- [#770](https://github.com/eps1lon/dom-accessibility-api/pull/770) [`7066180`](https://github.com/eps1lon/dom-accessibility-api/commit/70661802252b4e03d1c5874c53efab010b4f2974) Thanks [@eps1lon](https://github.com/eps1lon)! - Allow computing name for inaccessible elements

  This is mainly targetted at integration with `@testing-library/dom`.
  But it can also be used as a general performance boost when used in a JSDOM environment.
  The rationale is that most elements are part of the a11y tree.
  In those cases computing a11y tree exclusion is wasted.
  Since it's expensive, we can disable it.
  The recommendation is to only ignore a11y tree inclusion locally and specifically
  enable it for the tests where you do know that a11y tree inclusion will play a role.

## 0.5.9

### Patch Changes

- [#762](https://github.com/eps1lon/dom-accessibility-api/pull/762) [`b3e4a17`](https://github.com/eps1lon/dom-accessibility-api/commit/b3e4a1711cd0d8dbc83bd6c656698cc2b2cc3b6a) Thanks [@eps1lon](https://github.com/eps1lon)! - Compute name from author for `menu` role.

  Previously we wouldn't compute any name for `menu` to pass some web-platform-tests that covered an exotic use case.
  Now we correctly respect name from author (e.g. `aria-label` or `aria-labelledby`).

## 0.5.8

### Patch Changes

- [#343](https://github.com/eps1lon/dom-accessibility-api/pull/343) [`3d755c2`](https://github.com/eps1lon/dom-accessibility-api/commit/3d755c2b851d7e5da762494559347dfcc25a6654) Thanks [@eps1lon](https://github.com/eps1lon)! - Add `isInaccessible` and `isSubtreeInaccessible`.

  `isInaccessible` implements https://www.w3.org/TR/wai-aria-1.2/#tree_exclusion.
  `isSubtreeInaccessible` can be used to inject a memoized version of that function into `isInaccessible`.

## 0.5.7

### Patch Changes

- [#718](https://github.com/eps1lon/dom-accessibility-api/pull/718) [`6154760`](https://github.com/eps1lon/dom-accessibility-api/commit/61547602a7676167a65a893be53c3cf6b4e010b5) Thanks [@calebeby](https://github.com/calebeby)! - Remove implicit "document" role on `<body>` and add it to `<html>`

## 0.5.6

### Patch Changes

- [#666](https://github.com/eps1lon/dom-accessibility-api/pull/666) [`26ee73d`](https://github.com/eps1lon/dom-accessibility-api/commit/26ee73de9ad6fce27cde0d5ec53a2bc4a12bd879) Thanks [@eps1lon](https://github.com/eps1lon)! - Consider `<label />` when computing the accessible name of `<output />`

  Given

  ```html
  <label for="outputid">Output Label</label> <output id="outputid"></output>
  ```

  Previously the accessible name of the `<output />` would ignore the `<label />`.
  However, an [`<output />` is labelable](https://html.spec.whatwg.org/#the-output-element) and therefore the accessible name is now computed using `<label />` elements if they exists.
  In this example the accessible name is `"Output Label"`.

## 0.5.5

### Patch Changes

- [#627](https://github.com/eps1lon/dom-accessibility-api/pull/627) [`0485441`](https://github.com/eps1lon/dom-accessibility-api/commit/0485441e68cf728596d7140bdff2ac13280eefab) Thanks [@eps1lon](https://github.com/eps1lon)! - Ensure certain babel helpers aren't required

  Source:

  ```diff
  -const [item] = list;
  +const item = list[0];
  ```

  Transpiled:

  ```diff
  -var _trim$split = list.trim().split(" "),
  -_trim$split2 = _slicedToArray(_trim$split, 1),
  -item = _trim$split2[0]
  +var item = list[0];
  ```

* [#629](https://github.com/eps1lon/dom-accessibility-api/pull/629) [`383bdb6`](https://github.com/eps1lon/dom-accessibility-api/commit/383bdb616c00105474c8607dd9e5aab4deaff7ed) Thanks [@eps1lon](https://github.com/eps1lon)! - Use label attribute for naming of `<optgroup>` elements.

  Given

  ```jsx
  <select>
  	<optgroup label="foo">
  		<option value="1">bar</option>
  	</optgroup>
  </select>
  ```

  Previously the `<optgroup />` would not have an accessible name.
  Though [2D in `accname` 1.2](https://www.w3.org/TR/accname-1.2/) could be interpreted to use the `label` attribute:

  > Otherwise, if the current node's native markup provides an attribute (e.g. title) or element (e.g. HTML label) that defines a text alternative, return that alternative [...]

  This was confirmed in NVDA + FireFox.

## 0.5.4

### Patch Changes

- [`3866289`](https://github.com/eps1lon/dom-accessibility-api/commit/3866289a6ad92b73a8c031a2983165e1b1f2b24c) [#442](https://github.com/eps1lon/dom-accessibility-api/pull/442) Thanks [@geoffrich](https://github.com/geoffrich)! - Correctly determine accessible name when element contains a slot.

  Previously, computing the accessible name would only examine child nodes. However, content placed in a slot is is an assigned node, not a child node.

  If you have a custom element `custom-button` with a slot:

  ```html
  <button><slot></slot></button>

  <!-- accname of inner <button> is 'Custom name' (previously '') -->
  <custom-button>Custom name</custom-button>
  ```

  If you have a custom element `custom-button-default` with default content in the slot:

  ```html
  <button><slot>Default name</slot></button>

  <!-- accname of inner <button> is 'Custom name' (previously 'Default name') -->
  <custom-button-default>Custom name</custom-button-default>

  <!-- accname of inner <button> is 'Default name' (previously 'Default name') -->
  <custom-button-default></custom-button-default>
  ```

  This is not currently defined in the accname spec but reflects current browser behavior.

## 0.5.3

### Patch Changes

- [`76e8f93`](https://github.com/eps1lon/dom-accessibility-api/commit/76e8f93ccd8d6d3464d1b362a22163c501b9ea37) [#430](https://github.com/eps1lon/dom-accessibility-api/pull/430) Thanks [@ckundo](https://github.com/ckundo)! - Maintain `img` role for `img` with missing `alt` attribute.

  Previously `<img />` would be treated the same as `<img alt />`.
  `<img />` is now treated as `role="img"` [as specified](https://w3c.github.io/html-aam/#el-img-empty-alt).

* [`96d4438`](https://github.com/eps1lon/dom-accessibility-api/commit/96d443855b897fccb9fa09d5f595c502b23e6cf9) [#436](https://github.com/eps1lon/dom-accessibility-api/pull/436) Thanks [@eps1lon](https://github.com/eps1lon)! - Resolve presentational role conflicts when global WAI-ARIA states or properties (ARIA attributes) are used.

  `<img alt="" />` used to have no role.
  [By spec](https://w3c.github.io/html-aam/#el-img-empty-alt) it should have `role="presentation"` with no ARIA attributes or `role="img"` [otherwise](https://rawgit.com/w3c/aria/stable/#conflict_resolution_presentation_none).

## 0.5.2

### Patch Changes

- [`03273b7`](https://github.com/eps1lon/dom-accessibility-api/commit/03273b7d91a156a6dd9c727293a491cd2d1f02f1) [#406](https://github.com/eps1lon/dom-accessibility-api/pull/406) Thanks [@eps1lon](https://github.com/eps1lon)! - Fix various issues for input types `submit`, `reset` and `image`

  Prefer input `value` when `type` is `reset` or `submit`:

  ```diff
  <input type="submit" value="Submit values">
  -// accessible name: "Submit"
  +// accessible name: "Submit values"
  <input type="reset" value="Reset form">
  -// accessible name: "Reset"
  +// accessible name: "Reset form"
  ```

  For input `type` `image` consider `alt` attribute or fall back to `"Submit query"`.

## 0.5.1

### Patch Changes

- [`fcc66ae`](https://github.com/eps1lon/dom-accessibility-api/commit/fcc66aef833b8c7546921800e09cbb2096ef9601) [#394](https://github.com/eps1lon/dom-accessibility-api/pull/394) Thanks [@marcosvega91](https://github.com/marcosvega91)! - Ignore `title` attribute if it is empty.

  Previously `<button title="">Hello, Dave!</button>` would wrongly compute an empty name.

## 0.5.0

### Minor Changes

- [`9e46c51`](https://github.com/eps1lon/dom-accessibility-api/commit/9e46c51b51993c65237efd4b0d046f1a35c3e76a) [#380](https://github.com/eps1lon/dom-accessibility-api/pull/380) Thanks [@eps1lon](https://github.com/eps1lon)! - **BREAKING CHANGE**

  Ignore `::before` and `::after` by default.

  This was necessary to prevent excessive warnings in `jsdom@^16.4.0`.
  If you use this package in a browser that supports the second arg